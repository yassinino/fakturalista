import{r as u,f as A,A as E,x as p,g as V,h as B,o as b,c as h,b as e,i as y,w as f,t as a,l as d,E as U,m as i,d as S,v as m,n as C,j as N,G as L,N as R,k as M,K as j,p as $,z as G,O as J,J as K}from"./main-fd6829f8.js";const O={class:"content"},x=["onSubmit"],H={class:"row"},I={class:"col-lg-12"},Q={class:"row items-push"},W={class:"col-md-6"},X={class:"form-check form-block"},Y={class:"form-check-label",for:"type2"},Z={class:"d-block p-1 fw-normal text-center my-1"},ee={class:"fs-4 fw-semibold"},se={class:"col-md-6"},te={class:"form-check form-block"},oe={class:"form-check-label",for:"type1"},le={class:"d-block p-1 fw-normal text-center my-1"},ae={class:"fs-4 fw-semibold"},ie={class:"col-lg-9 offset-lg-3"},ne={class:"row mb-2"},de={class:"col-sm-3 col-form-label",for:"item-name"},ce=e("span",{class:"text-danger"},"*",-1),me={class:"col-sm-9"},re={class:"row mb-2"},ue={class:"col-sm-3 col-form-label",for:"item-sales-price"},pe={class:"col-sm-9"},fe={key:0,class:"row mb-2"},_e={class:"col-sm-3 col-form-label",for:"item-purchase-price"},ve={class:"col-sm-9"},be={key:1,class:"row mb-2"},he={class:"col-sm-3 col-form-label",for:"item-purchase-price"},ye={class:"col-sm-9"},$e={value:"pc"},ge={value:"kg"},ke=e("hr",null,null,-1),we={class:"col-lg-9 offset-lg-3"},Ve={class:"row mb-2"},Be={class:"col-sm-3 col-form-label",for:"item-description"},Ue={class:"col-sm-9"},Se={class:"row mb-2"},Ce={class:"col-sm-3 col-form-label",for:"item-family"},Ne={class:"col-sm-9"},Me={href:"","data-bs-toggle":"modal","data-bs-target":"#modal-block-vcenter"},Fe={type:"submit",class:"btn btn-lg btn-primary mb-3"},Te={class:"modal",id:"modal-block-vcenter",tabindex:"-1",role:"dialog","aria-labelledby":"modal-block-vcenter","aria-hidden":"true"},De={class:"modal-content"},Pe=e("button",{type:"button",class:"btn-block-option","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{class:"fa fa-fw fa-times"})],-1),qe=["onSubmit"],ze={class:"block-content fs-sm"},Ae={class:"col-lg-9 offset-lg-3"},Ee={class:"row mb-2"},Le={class:"col-sm-3 col-form-label",for:"item-name"},Re=e("span",{class:"text-danger"},"*",-1),je={class:"col-sm-9"},Ge={class:"block-content block-content-full text-end bg-body"},Je={type:"button",class:"btn btn-sm btn-alt-secondary me-1","data-bs-dismiss":"modal"},Ke={type:"submit",class:"btn btn-sm btn-primary"},He={__name:"edit",setup(Oe){const F=K({}),g=j(),o=u({}),c=A({name:null}),_=u(),v=u(),T=u(g.params.id);E(async()=>{let l=await p.get("/items/"+T.value+"/edit");o.value=l.data.item;let s=await p.get("/families");v.value=s.data.families});const D=V(()=>({name:{required:$},type:{required:$}})),P=V(()=>({name:{required:$}})),n=B(D,o),r=B(P,c);async function q(){await r.value.$validate()&&p.post("/families",c).then(s=>{v.value.push(s.data.family),c.name="",console.log(_.value),_.value.hide()})}async function z(){await n.value.$validate()&&p.post("/items/"+o.value.uuid,o.value,{params:{_method:"put"}}).then(s=>{F.success(s.data.message),g.push("/admin/items")})}return(l,s)=>{const k=G("BaseBlock"),w=J("decimal");return b(),h("div",O,[e("form",{onSubmit:M(z,["prevent"])},[y(k,{title:l.$t("items.editTitle"),"content-full":""},{footer:f(()=>[e("button",Fe,a(l.$t("common.save")),1)]),default:f(()=>[e("div",H,[e("div",I,[e("div",Q,[e("div",W,[e("div",X,[d(e("input",{type:"radio",class:"form-check-input",id:"type2",name:"type",value:"2","onUpdate:modelValue":s[0]||(s[0]=t=>o.value.type=t),onBlur:s[1]||(s[1]=(...t)=>i(n).type.$touch&&i(n).type.$touch(...t))},null,544),[[U,o.value.type]]),e("label",Y,[e("span",Z,[e("span",ee,a(l.$t("items.types.product")),1)])])])]),e("div",se,[e("div",te,[d(e("input",{type:"radio",class:"form-check-input",id:"type1",name:"type",value:"1","onUpdate:modelValue":s[2]||(s[2]=t=>o.value.type=t),onBlur:s[3]||(s[3]=(...t)=>i(n).type.$touch&&i(n).type.$touch(...t))},null,544),[[U,o.value.type]]),e("label",oe,[e("span",le,[e("span",ae,a(l.$t("items.types.service")),1)])])])])])]),e("div",ie,[e("div",ne,[e("label",de,[S(a(l.$t("items.fields.name")),1),ce]),e("div",me,[d(e("input",{type:"text",class:C(["form-control",{"is-invalid":i(n).name.$errors.length}]),"onUpdate:modelValue":s[4]||(s[4]=t=>o.value.name=t),id:"item-name",onBlur:s[5]||(s[5]=(...t)=>i(n).name.$touch&&i(n).name.$touch(...t))},null,34),[[m,o.value.name]])])]),e("div",re,[e("label",ue,a(l.$t("items.fields.salesPrice")),1),e("div",pe,[d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=t=>o.value.sales_price=t),id:"item-sales-price",inputmode:"decimal",autocomplete:"off"},null,512),[[m,o.value.sales_price],[w,{decimals:2}]])])]),o.value.type==2?(b(),h("div",fe,[e("label",_e,a(l.$t("items.fields.purchasePrice")),1),e("div",ve,[d(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[7]||(s[7]=t=>o.value.purchase_price=t),id:"item-purchase-price",inputmode:"decimal"},null,512),[[m,o.value.purchase_price],[w,{decimals:2}]])])])):N("",!0),o.value.type==2?(b(),h("div",be,[e("label",he,a(l.$t("items.fields.unit")),1),e("div",ye,[d(e("select",{class:"form-select",id:"cart-vta","onUpdate:modelValue":s[8]||(s[8]=t=>o.value.unite=t)},[e("option",$e,a(l.$t("units.piece")),1),e("option",ge,a(l.$t("units.kilogram")),1)],512),[[L,o.value.unite]])])])):N("",!0)]),ke,e("div",we,[e("div",Ve,[e("label",Be,a(l.$t("items.fields.description")),1),e("div",Ue,[d(e("textarea",{class:"form-control",rows:"4","onUpdate:modelValue":s[9]||(s[9]=t=>o.value.description=t),id:"item-description"},null,512),[[m,o.value.description]])])]),e("div",Se,[e("label",Ce,a(l.$t("items.fields.family")),1),e("div",Ne,[y(i(R),{id:"quote-customer",modelValue:o.value.family_id,"onUpdate:modelValue":s[10]||(s[10]=t=>o.value.family_id=t),options:v.value,label:"name",reduce:t=>t.id,placeholder:l.$t("items.selectFamilyPlaceholder")},null,8,["modelValue","options","reduce","placeholder"]),e("small",null,[e("a",Me,a(l.$t("items.createFamilyLink")),1)])])])])])]),_:1},8,["title"])],40,x),e("div",Te,[e("div",{class:"modal-dialog modal-dialog-centered modal-lg",role:"document",ref_key:"modal_family",ref:_},[e("div",De,[y(k,{title:l.$t("items.createFamilyTitle"),transparent:"",class:"mb-0"},{options:f(()=>[Pe]),content:f(()=>[e("form",{onSubmit:M(q,["prevent"])},[e("div",ze,[e("div",Ae,[e("div",Ee,[e("label",Le,[S(a(l.$t("items.familyNameLabel")),1),Re]),e("div",je,[d(e("input",{type:"text",class:C(["form-control",{"is-invalid":i(r).name.$errors.length}]),"onUpdate:modelValue":s[11]||(s[11]=t=>c.name=t),id:"item-name",onBlur:s[12]||(s[12]=(...t)=>i(r).type.$touch&&i(r).type.$touch(...t))},null,34),[[m,c.name]])])])])]),e("div",Ge,[e("button",Je,a(l.$t("common.close")),1),e("button",Ke,a(l.$t("common.save")),1)])],40,qe)]),_:1},8,["title"])])],512)])])}}};export{He as default};

import{r as m,e as E,y as F,s as u,f as x,g as V,o as f,c as b,b as e,h,w as p,k as i,C as $,l,v as c,n as B,i as C,D as G,L as R,j as U,d as N,I as T,m as y,x as j,M as A,H}from"./main-59537e72.js";const I={class:"content"},L=["onSubmit"],J={class:"row"},K={class:"col-lg-12"},O={class:"row items-push"},Q={class:"col-md-6"},W={class:"form-check form-block"},X=e("label",{class:"form-check-label",for:"type2"},[e("span",{class:"d-block p-1 fw-normal text-center my-1"},[e("span",{class:"fs-4 fw-semibold"},"Producto")])],-1),Y={class:"col-md-6"},Z={class:"form-check form-block"},ee=e("label",{class:"form-check-label",for:"type1"},[e("span",{class:"d-block p-1 fw-normal text-center my-1"},[e("span",{class:"fs-4 fw-semibold"},"Servicio")])],-1),se={class:"col-lg-9 offset-lg-3"},te={class:"row mb-2"},oe=e("label",{class:"col-sm-3 col-form-label",for:"item-name"},[N("Nombre"),e("span",{class:"text-danger"},"*")],-1),le={class:"col-sm-9"},ae={class:"row mb-2"},ie=e("label",{class:"col-sm-3 col-form-label",for:"item-sales-price"},"Precio de venta",-1),ne={class:"col-sm-9"},ce={key:0,class:"row mb-2"},de=e("label",{class:"col-sm-3 col-form-label",for:"item-purchase-price"},"Precio de compra",-1),re={class:"col-sm-9"},me={key:1,class:"row mb-2"},ue=e("label",{class:"col-sm-3 col-form-label",for:"item-purchase-price"},"Unidad",-1),pe={class:"col-sm-9"},_e=e("option",{value:"pc"},"pieza",-1),ve=e("option",{value:"kg"},"kg",-1),fe=[_e,ve],be=e("hr",null,null,-1),he={class:"col-lg-9 offset-lg-3"},ye={class:"row mb-2"},ge=e("label",{class:"col-sm-3 col-form-label",for:"item-description"},"DescripciÃ³n",-1),ke={class:"col-sm-9"},we={class:"row mb-2"},xe=e("label",{class:"col-sm-3 col-form-label",for:"item-family"},"Familia",-1),Ve={class:"col-sm-9"},$e=e("small",null,[e("a",{href:"","data-bs-toggle":"modal","data-bs-target":"#modal-block-vcenter"},"Crear uno nuevo")],-1),Be=e("button",{type:"submit",class:"btn btn-lg btn-primary mb-3"},"Guardar",-1),Ce={class:"modal",id:"modal-block-vcenter",tabindex:"-1",role:"dialog","aria-labelledby":"modal-block-vcenter","aria-hidden":"true"},Ue={class:"modal-content"},Ne=e("button",{type:"button",class:"btn-block-option","data-bs-dismiss":"modal","aria-label":"Close"},[e("i",{class:"fa fa-fw fa-times"})],-1),Se=["onSubmit"],Me={class:"block-content fs-sm"},De={class:"col-lg-9 offset-lg-3"},Pe={class:"row mb-2"},qe=e("label",{class:"col-sm-3 col-form-label",for:"item-name"},[N("Nombre"),e("span",{class:"text-danger"},"*")],-1),ze={class:"col-sm-9"},Ee=e("div",{class:"block-content block-content-full text-end bg-body"},[e("button",{type:"button",class:"btn btn-sm btn-alt-secondary me-1","data-bs-dismiss":"modal"}," Cerrar "),e("button",{type:"submit",class:"btn btn-sm btn-primary"}," Guardar ")],-1),Re={__name:"edit",setup(Fe){const S=H({}),g=T(),o=m({}),n=E({name:null}),_=m(),v=m(),M=m(g.params.id);F(async()=>{let r=await u.get("/items/"+M.value+"/edit");o.value=r.data.item;let s=await u.get("/families");v.value=s.data.families});const D=x(()=>({name:{required:y},type:{required:y}})),P=x(()=>({name:{required:y}})),a=V(D,o),d=V(P,n);async function q(){await d.value.$validate()&&u.post("/families",n).then(s=>{v.value.push(s.data.family),n.name="",console.log(_.value),_.value.hide()})}async function z(){await a.value.$validate()&&u.post("/items/"+o.value.uuid,o.value,{params:{_method:"put"}}).then(s=>{S.success(s.data.message),g.push("/admin/items")})}return(r,s)=>{const k=j("BaseBlock"),w=A("decimal");return f(),b("div",I,[e("form",{onSubmit:U(z,["prevent"])},[h(k,{title:"Nuevo producto o servicio","content-full":""},{footer:p(()=>[Be]),default:p(()=>[e("div",J,[e("div",K,[e("div",O,[e("div",Q,[e("div",W,[i(e("input",{type:"radio",class:"form-check-input",id:"type2",name:"type",value:"2","onUpdate:modelValue":s[0]||(s[0]=t=>o.value.type=t),onBlur:s[1]||(s[1]=(...t)=>l(a).type.$touch&&l(a).type.$touch(...t))},null,544),[[$,o.value.type]]),X])]),e("div",Y,[e("div",Z,[i(e("input",{type:"radio",class:"form-check-input",id:"type1",name:"type",value:"1","onUpdate:modelValue":s[2]||(s[2]=t=>o.value.type=t),onBlur:s[3]||(s[3]=(...t)=>l(a).type.$touch&&l(a).type.$touch(...t))},null,544),[[$,o.value.type]]),ee])])])]),e("div",se,[e("div",te,[oe,e("div",le,[i(e("input",{type:"text",class:B(["form-control",{"is-invalid":l(a).name.$errors.length}]),"onUpdate:modelValue":s[4]||(s[4]=t=>o.value.name=t),id:"item-name",onBlur:s[5]||(s[5]=(...t)=>l(a).name.$touch&&l(a).name.$touch(...t))},null,34),[[c,o.value.name]])])]),e("div",ae,[ie,e("div",ne,[i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=t=>o.value.sales_price=t),id:"item-sales-price",inputmode:"decimal",autocomplete:"off"},null,512),[[c,o.value.sales_price],[w,{decimals:2}]])])]),o.value.type==2?(f(),b("div",ce,[de,e("div",re,[i(e("input",{type:"text",class:"form-control","onUpdate:modelValue":s[7]||(s[7]=t=>o.value.purchase_price=t),id:"item-purchase-price",inputmode:"decimal"},null,512),[[c,o.value.purchase_price],[w,{decimals:2}]])])])):C("",!0),o.value.type==2?(f(),b("div",me,[ue,e("div",pe,[i(e("select",{class:"form-select",id:"cart-vta","onUpdate:modelValue":s[8]||(s[8]=t=>o.value.unite=t)},fe,512),[[G,o.value.unite]])])])):C("",!0)]),be,e("div",he,[e("div",ye,[ge,e("div",ke,[i(e("textarea",{class:"form-control",rows:"4","onUpdate:modelValue":s[9]||(s[9]=t=>o.value.description=t),id:"item-description"},null,512),[[c,o.value.description]])])]),e("div",we,[xe,e("div",Ve,[h(l(R),{id:"quote-customer",modelValue:o.value.family_id,"onUpdate:modelValue":s[10]||(s[10]=t=>o.value.family_id=t),options:v.value,label:"name",reduce:t=>t.id,placeholder:"Elige un valor..."},null,8,["modelValue","options","reduce"]),$e])])])])]),_:1})],40,L),e("div",Ce,[e("div",{class:"modal-dialog modal-dialog-centered modal-lg",role:"document",ref_key:"modal_family",ref:_},[e("div",Ue,[h(k,{title:"Crea una familia de productos",transparent:"",class:"mb-0"},{options:p(()=>[Ne]),content:p(()=>[e("form",{onSubmit:U(q,["prevent"])},[e("div",Me,[e("div",De,[e("div",Pe,[qe,e("div",ze,[i(e("input",{type:"text",class:B(["form-control",{"is-invalid":l(d).name.$errors.length}]),"onUpdate:modelValue":s[11]||(s[11]=t=>n.name=t),id:"item-name",onBlur:s[12]||(s[12]=(...t)=>l(d).type.$touch&&l(d).type.$touch(...t))},null,34),[[c,n.name]])])])])]),Ee],40,Se)]),_:1})])],512)])])}}};export{Re as default};

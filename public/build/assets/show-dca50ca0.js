import{z as p,g as E,B as I,o as m,c as h,j as r,d as i,a as e,e as f,t as n,I as V,K as $,S as A,x as b,r as v,w as D,L as F,n as M,k,R as T}from"./main-35dd85fa.js";import{_ as j}from"./Pagination-a1fddd4f.js";const S={class:"content"},z={class:"block-options-item"},L={class:"row"},R={class:"col-md-6"},q={class:"mb-4"},K=e("h5",{class:"mb-1"},"Nombre",-1),G={class:"fs-sm text-muted"},H={class:"col-md-6"},J={class:"mb-4"},O=e("h5",{class:"mb-1"},"Correo electrónico",-1),Q={class:"fs-sm text-muted"},W={class:"col-md-6"},X={class:"mb-4"},Y=e("h5",{class:"mb-1"},"Teléfono",-1),Z={class:"fs-sm text-muted"},ee={class:"col-md-6"},te={class:"mb-4"},se=e("h5",{class:"mb-1"},"Dirección de facturación",-1),ae={class:"fs-sm text-muted"},oe={class:"col-md-6"},ce={class:"mb-4"},le=e("h5",{class:"mb-1"},"NIF",-1),ne={class:"fs-sm text-muted"},de=e("div",{class:"block-options-item"},null,-1),ie={class:"table table-vcenter"},re={class:"text-center"},_e=e("th",{class:"d-none d-sm-table-cell"}," Numero ",-1),ue=e("th",{class:"d-none d-sm-table-cell"}," Cliente ",-1),pe=e("th",{class:"d-none d-sm-table-cell"}," Fecha ",-1),me=e("th",{class:"d-none d-sm-table-cell"}," SUMA ",-1),he=e("th",{class:"d-none d-sm-table-cell"}," Total ",-1),be=e("th",{class:"d-none d-sm-table-cell"}," Estado ",-1),ge=e("th",{class:"text-center",style:{width:"100px"}},"Acciones",-1),fe={class:"text-center",scope:"row"},ve=["onUpdate:modelValue"],ke={class:"d-none d-sm-table-cell"},we={class:"d-none d-sm-table-cell"},xe={class:"d-none d-sm-table-cell"},Ce={class:"d-none d-sm-table-cell"},ye={class:"d-none d-sm-table-cell"},Be={class:"d-none d-sm-table-cell"},Pe={class:"text-center"},Ne={class:"dropdown dropstart push"},Ue=e("button",{type:"button",class:"btn btn-outline-primary dropdown-toggle",id:"dropdown-dropleft-dark","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("i",{class:"fa fa-fw fa-ellipsis-v"})],-1),Ee={class:"dropdown-menu fs-sm","aria-labelledby":"dropdown-dropleft-dark"},Ie=["onClick"],Ve=["onClick"],Fe={__name:"show",setup($e){const w=T({}),d=p([]),s=E({current_page:1,last_page:1,per_page:10,total:0}),c=p({}),x=A(),C=p(x.params.id);async function _(t=s.current_page,o=s.per_page){const{data:l}=await b.get("/customers/"+C.value,{params:{page:t,per_page:o}});d.value=l.invoices,s.current_page=l.meta.current_page,s.last_page=l.meta.last_page,s.per_page=l.meta.per_page??o,s.total=l.meta.total,c.value=l.customer}I(()=>_());function y(t){t<1||t>s.last_page||(s.current_page=t,_(t,s.per_page))}function B(t){s.per_page=t,s.current_page=1,_(1,t)}const P=t=>{confirm("¿Estás seguro de que deseas eliminar esta factura?")&&b.delete("/invoices/"+t.uuid).then(o=>{d.value=d.value.filter(l=>l.uuid!==t.uuid)}).catch(o=>{console.error("There was an error deleting the invoice!",o)})},N=t=>{d.value=d.value.map(o=>(o.checked=t,o))};async function U(t){b.post("/invoices/print",t).then(o=>{w.success(o.data.message),window.open(o.data.pdf_url,"_blank")})}return(t,o)=>{const l=v("router-link"),g=v("BaseBlock");return m(),h("div",S,[r(g,{title:"Cliente - "+c.value.name},{options:i(()=>[e("div",z,[r(l,{to:"/backend/customers/edit/"+c.value.uuid,class:"btn btn-primary"},{default:i(()=>[f("Editar")]),_:1},8,["to"])])]),default:i(()=>[e("div",L,[e("div",R,[e("div",q,[K,e("p",G,n(c.value.type==1?c.value.name:c.value.first_name+" "+c.value.last_name),1)])]),e("div",H,[e("div",J,[O,e("p",Q,n(c.value.email),1)])]),e("div",W,[e("div",X,[Y,e("p",Z,n(c.value.phone),1)])]),e("div",ee,[e("div",te,[se,e("p",ae,n(c.value.address_billing),1)])]),e("div",oe,[e("div",ce,[le,e("p",ne,n(c.value.ice),1)])])])]),_:1},8,["title"]),r(g,{title:"Facturas"},{options:i(()=>[de]),default:i(()=>[e("table",ie,[e("thead",null,[e("tr",null,[e("th",re,[e("input",{type:"checkbox",class:"form-check-input",onChange:N},null,32)]),_e,ue,pe,me,he,be,ge])]),e("tbody",null,[(m(!0),h(V,null,$(d.value,a=>(m(),h("tr",{key:a.id},[e("th",fe,[D(e("input",{type:"checkbox",name:"",class:"form-check-input","onUpdate:modelValue":u=>a.checked=u},null,8,ve),[[F,a.checked]])]),e("td",ke,[r(l,{to:"invoices/edit/"+a.uuid},{default:i(()=>[f(n(a.reference),1)]),_:2},1032,["to"])]),e("td",we,n(a.customer),1),e("td",xe,n(a.date),1),e("td",Ce,n(t.$toComma(a.sub_total)),1),e("td",ye,n(t.$toComma(a.total)),1),e("td",Be,[e("span",{class:M(["fs-xs fw-semibold d-inline-block py-1 px-3 rounded-pill",a.status==1?"bg-success-light text-success":"bg-danger-light text-danger"])},n(a.status==1?"Pagado":"No Pagado"),3)]),e("td",Pe,[e("div",Ne,[Ue,e("div",Ee,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:k(u=>U(a),["prevent"])},"Documento",8,Ie),e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:k(u=>P(a),["prevent"])},"Eliminar",8,Ve)])])])]))),128))])]),r(j,{data:d.value,meta:{currentPage:s.current_page,lastPage:s.last_page,perPage:s.per_page,total:s.total},"onUpdate:page":y,"onUpdate:perPage":B},null,8,["data","meta"])]),_:1})])}}};export{Fe as default};

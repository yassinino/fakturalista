import{u as L,r as S,e as C,f as I,g as q,h as N,o as m,c as p,b as s,i as g,w as h,d as _,t as i,j as f,k as T,l as w,v as b,n as $,m as e,p as k,q as M,s as y,x as P,y as U,z as x}from"./main-fd6829f8.js";const j={class:"hero-static d-flex align-items-center"},z={class:"content"},D={class:"row justify-content-center push"},R={class:"col-md-8 col-lg-6 col-xl-4"},E={class:"p-sm-3 px-lg-4 px-xxl-5 py-lg-5"},F=s("h1",{class:"h2 mb-1"},"Fakturalista",-1),A={key:0,class:"alert alert-danger",role:"alert"},G=["onSubmit"],H={class:"py-3"},J={class:"mb-4"},K=["placeholder"],O={key:0,class:"invalid-feedback animated fadeIn"},Q={class:"mb-4"},W=["placeholder"],X={key:0,class:"invalid-feedback animated fadeIn"},Y={class:"row mb-4"},Z={class:"col-md-6 col-xl-12"},ss={type:"submit",class:"btn btn-block btn-alt-primary"},ts=s("i",{class:"fa fa-fw fa-sign-in-alt me-1 opacity-50"},null,-1),es={class:"fs-sm text-muted text-center"},ls={__name:"SignIn",setup(os){const c=L(),d=S(""),{t:v}=C(),r=I({email:null,password:null}),B=q(()=>({email:{required:k,email:M,minLength:y(3)},password:{required:k,minLength:y(5)}})),o=N(B,r);async function V(){await o.value.$validate()&&(d.value="",P.post("/login",r).then(t=>{var l,u;c.loginUser(t.data.data),U(((u=(l=t.data.data)==null?void 0:l.user)==null?void 0:u.locale)||"es"),window.location.href="/admin/customers"}).catch(t=>{var l;if(((l=t.response)==null?void 0:l.status)===401){d.value=v("auth.invalidCredentials");return}d.value=v("auth.failed")}))}return(a,t)=>{const l=x("RouterLink"),u=x("BaseBlock");return m(),p("div",j,[s("div",z,[s("div",D,[s("div",R,[g(u,{title:a.$t("auth.signInTitle"),class:"mb-0"},{options:h(()=>[g(l,{to:{name:"auth-signin"},class:"btn-block-option fs-sm"},{default:h(()=>[_(i(a.$t("auth.forgotPassword")),1)]),_:1})]),default:h(()=>[s("div",E,[F,d.value?(m(),p("div",A,i(d.value),1)):f("",!0),s("form",{onSubmit:T(V,["prevent"])},[s("div",H,[s("div",J,[w(s("input",{type:"text",class:$(["form-control form-control-alt form-control-lg",{"is-invalid":e(o).email.$errors.length}]),id:"login-email",name:"login-email",placeholder:a.$t("auth.emailPlaceholder"),"onUpdate:modelValue":t[0]||(t[0]=n=>r.email=n),onBlur:t[1]||(t[1]=(...n)=>e(o).email.$touch&&e(o).email.$touch(...n))},null,42,K),[[b,r.email]]),e(o).email.$errors.length?(m(),p("div",O,i(a.$t("auth.required")),1)):f("",!0)]),s("div",Q,[w(s("input",{type:"password",class:$(["form-control form-control-alt form-control-lg",{"is-invalid":e(o).password.$errors.length}]),id:"login-password",name:"login-password",placeholder:a.$t("auth.passwordPlaceholder"),"onUpdate:modelValue":t[2]||(t[2]=n=>r.password=n),onBlur:t[3]||(t[3]=(...n)=>e(o).password.$touch&&e(o).password.$touch(...n))},null,42,W),[[b,r.password]]),e(o).password.$errors.length?(m(),p("div",X,i(a.$t("auth.required")),1)):f("",!0)])]),s("div",Y,[s("div",Z,[s("button",ss,[ts,_(" "+i(a.$t("auth.submit")),1)])])])],40,G)])]),_:1},8,["title"])])]),s("div",es,[s("strong",null,i(e(c).app.name+" "+e(c).app.version),1),_(" Â© "+i(e(c).app.copyright),1)])])])}}};export{ls as default};

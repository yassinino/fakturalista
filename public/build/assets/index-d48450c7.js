import{r as P,e as U,f as x,A as V,o as u,c as _,i as d,w as i,b as t,d as h,t as s,F as D,C as I,x as m,z as b,l as A,D as M,n as N,k as g,J as T}from"./main-84df2961.js";import{_ as j}from"./Pagination-c8e9d85d.js";const z={class:"content"},F={class:"block-options-item"},E={class:"table table-vcenter"},J={class:"text-center"},L={class:"d-none d-sm-table-cell"},S={class:"d-none d-sm-table-cell"},q={class:"d-none d-sm-table-cell"},G={class:"d-none d-sm-table-cell"},H={class:"d-none d-sm-table-cell"},K={class:"d-none d-sm-table-cell"},O={class:"text-center",style:{width:"100px"}},Q={class:"text-center",scope:"row"},R=["onUpdate:modelValue"],W={class:"d-none d-sm-table-cell"},X={class:"d-none d-sm-table-cell"},Y={class:"d-none d-sm-table-cell"},Z={class:"d-none d-sm-table-cell"},ee={class:"d-none d-sm-table-cell"},te={class:"d-none d-sm-table-cell"},se={class:"text-center"},ae={class:"dropdown dropstart push"},oe=t("button",{type:"button",class:"btn btn-outline-primary dropdown-toggle",id:"dropdown-dropleft-dark","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[t("i",{class:"fa fa-fw fa-ellipsis-v"})],-1),ne={class:"dropdown-menu fs-sm","aria-labelledby":"dropdown-dropleft-dark"},le=["onClick"],ce=["onClick"],pe={__name:"index",setup(de){const f=T({}),c=P([]),{t:v}=U(),a=x({current_page:1,last_page:1,per_page:10,total:0});async function r(e=a.current_page,n=a.per_page){const{data:l}=await m.get("/invoices",{params:{page:e,per_page:n}});c.value=l.invoices,a.current_page=l.meta.current_page,a.last_page=l.meta.last_page,a.per_page=l.meta.per_page??n,a.total=l.meta.total}V(()=>r());function k(e){e<1||e>a.last_page||(a.current_page=e,r(e,a.per_page))}function w(e){a.per_page=e,a.current_page=1,r(1,e)}const $=e=>{confirm(v("invoices.confirmDelete"))&&m.delete("/invoices/"+e.uuid).then(n=>{c.value=c.value.filter(l=>l.uuid!==e.uuid)}).catch(n=>{console.error("There was an error deleting the invoice!",n)})},y=e=>{c.value=c.value.map(n=>(n.checked=e,n))};async function C(e){m.post("/invoices/print",e).then(n=>{f.success(n.data.message),window.open(n.data.pdf_url,"_blank")})}return(e,n)=>{const l=b("router-link"),B=b("BaseBlock");return u(),_("div",z,[d(B,{title:e.$t("invoices.title")},{options:i(()=>[t("div",F,[d(l,{to:"invoices/new",class:"btn btn-primary"},{default:i(()=>[h(s(e.$t("invoices.newTitle")),1)]),_:1})])]),default:i(()=>[t("table",E,[t("thead",null,[t("tr",null,[t("th",J,[t("input",{type:"checkbox",class:"form-check-input",onChange:y},null,32)]),t("th",L,s(e.$t("invoices.table.number")),1),t("th",S,s(e.$t("invoices.table.customer")),1),t("th",q,s(e.$t("invoices.table.date")),1),t("th",G,s(e.$t("invoices.table.subtotal")),1),t("th",H,s(e.$t("invoices.table.total")),1),t("th",K,s(e.$t("invoices.table.status")),1),t("th",O,s(e.$t("common.actions")),1)])]),t("tbody",null,[(u(!0),_(D,null,I(c.value,o=>(u(),_("tr",{key:o.id},[t("th",Q,[A(t("input",{type:"checkbox",name:"",class:"form-check-input","onUpdate:modelValue":p=>o.checked=p},null,8,R),[[M,o.checked]])]),t("td",W,[d(l,{to:"invoices/edit/"+o.uuid},{default:i(()=>[h(s(o.reference),1)]),_:2},1032,["to"])]),t("td",X,s(o.customer),1),t("td",Y,s(o.date),1),t("td",Z,s(e.$toComma(o.sub_total)),1),t("td",ee,s(e.$toComma(o.total)),1),t("td",te,[t("span",{class:N(["fs-xs fw-semibold d-inline-block py-1 px-3 rounded-pill",o.status==1?"bg-success-light text-success":"bg-danger-light text-danger"])},s(o.status==1?e.$t("invoices.statusPaid"):e.$t("invoices.statusUnpaid")),3)]),t("td",se,[t("div",ae,[oe,t("div",ne,[t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:g(p=>C(o),["prevent"])},s(e.$t("invoices.document")),9,le),t("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:g(p=>$(o),["prevent"])},s(e.$t("common.delete")),9,ce)])])])]))),128))])]),d(j,{data:c.value,meta:{currentPage:a.current_page,lastPage:a.last_page,perPage:a.per_page,total:a.total},"onUpdate:page":k,"onUpdate:perPage":w},null,8,["data","meta"])]),_:1},8,["title"])])}}};export{pe as default};

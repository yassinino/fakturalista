import{e as q,r as p,A as C,x as f,g as S,h as I,o as m,c,b as e,i as M,w as b,t as a,l as i,E as y,m as d,v as r,n as g,j as u,d as $,G as L,F as E,C as F,k as T,K as z,H as v,s as w,p as A,I as D,q as R,z as j,J as G}from"./main-fd6829f8.js";const H={class:"content"},J=["onSubmit"],K={class:"row"},O={class:"col-lg-3"},P={class:"fs-sm text-muted"},Q={class:"col-lg-9"},W={class:"row items-push"},X={class:"col-md-6"},Y={class:"form-check form-block"},Z={class:"form-check-label",for:"type1"},x={class:"d-block p-1 fw-normal text-center my-1"},ee={class:"fs-4 fw-semibold"},se={class:"col-md-6"},te={class:"form-check form-block"},oe={class:"form-check-label",for:"type2"},le={class:"d-block p-1 fw-normal text-center my-1"},ae={class:"fs-4 fw-semibold"},ie={key:0,class:"form-floating mb-4"},ne=["placeholder"],de={key:0,class:"invalid-feedback animated fadeIn"},re={for:"val-name"},me=e("span",{class:"text-danger"},"*",-1),ce={key:1,class:"row g-3"},ue={class:"form-floating col-4 mb-4"},pe=["placeholder"],fe={for:"val-first-name"},ve={class:"form-floating col-4 mb-4"},_e=["placeholder"],he={key:0,class:"invalid-feedback animated fadeIn"},be={for:"val-last-name"},ye=e("span",{class:"text-danger"},"*",-1),ge={class:"form-floating col-4 mb-4"},$e=["placeholder"],we={for:"val-middle-name"},ke={class:"form-floating mb-4"},Ve=["placeholder"],Ue={for:"val-email"},Ne={class:"row g-3"},Be={class:"form-floating col-6 mb-4"},qe=["placeholder"],Ce={for:"val-phone-name"},Se={class:"form-floating col-6 mb-4"},Ie=["placeholder"],Me={for:"val-website"},Le={class:"form-floating mb-4"},Ee=["placeholder"],Fe={for:"val-email"},Te=e("hr",null,null,-1),ze={class:"row"},Ae={class:"col-lg-3"},De={class:"fs-sm text-muted"},Re={class:"col-lg-9"},je={class:"form-floating mb-4"},Ge=["placeholder"],He={for:"val-billing-address"},Je={class:"row g-3"},Ke={class:"form-floating col-6 mb-4"},Oe=["placeholder"],Pe={for:"val-city"},Qe={class:"form-floating col-6 mb-4"},We=["placeholder"],Xe={for:"val-post-code"},Ye={class:"row g-3"},Ze={class:"form-floating col-6 mb-4"},xe={selected:""},es=["value"],ss={for:"example-select-floating"},ts=e("hr",null,null,-1),os={type:"submit",class:"btn btn-lg btn-primary mb-3"},is={__name:"edit",setup(ls){const k=G({});q();const t=p({}),_=p(),h=z(),V=p(h.params.id);C(async()=>{let l=await f.get("/customers/"+V.value+"/edit");t.value=l.data.customer,t.value.is_same_address=t.value.is_same_address==1;let s=await f.get("/countries");_.value=s.data.countries});const U=S(()=>({name:{required:v(function(){return t.value.type==1}),minLength:w(3)},last_name:{required:v(function(){return t.value.type==2}),minLength:w(3)},type:{required:A},contacts:{$each:D.forEach({last_name:{required:v(function(){return t.value.contacts.length>0})},email:{email:R}})}})),n=I(U,t);async function N(){await n.value.$validate()&&f.post("/customers/"+t.value.uuid,t.value,{params:{_method:"put"}}).then(s=>{k.success(s.data.message),h.push("/admin/customers")})}return(l,s)=>{const B=j("BaseBlock");return m(),c("div",H,[e("form",{onSubmit:T(N,["prevent"])},[M(B,{title:l.$t("customers.editTitle"),"content-full":""},{footer:b(()=>[e("button",os,a(l.$t("common.save")),1)]),default:b(()=>[e("div",K,[e("div",O,[e("p",P,a(l.$t("customers.overview")),1)]),e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[i(e("input",{type:"radio",class:"form-check-input",id:"type1",name:"type",value:"1","onUpdate:modelValue":s[0]||(s[0]=o=>t.value.type=o),onBlur:s[1]||(s[1]=(...o)=>d(n).type.$touch&&d(n).type.$touch(...o))},null,544),[[y,t.value.type]]),e("label",Z,[e("span",x,[e("span",ee,a(l.$t("customers.types.company")),1)])])])]),e("div",se,[e("div",te,[i(e("input",{type:"radio",class:"form-check-input",id:"type2",name:"type",value:"2","onUpdate:modelValue":s[2]||(s[2]=o=>t.value.type=o),onBlur:s[3]||(s[3]=(...o)=>d(n).type.$touch&&d(n).type.$touch(...o))},null,544),[[y,t.value.type]]),e("label",oe,[e("span",le,[e("span",ae,a(l.$t("customers.types.individual")),1)])])])])]),t.value.type==1?(m(),c("div",ie,[i(e("input",{type:"text",id:"val-name",class:g(["form-control",{"is-invalid":d(n).name.$errors.length}]),"onUpdate:modelValue":s[4]||(s[4]=o=>t.value.name=o),onBlur:s[5]||(s[5]=(...o)=>d(n).name.$touch&&d(n).name.$touch(...o)),placeholder:l.$t("customers.fields.companyName")},null,42,ne),[[r,t.value.name]]),d(n).name.$errors.length?(m(),c("div",de,a(l.$t("validation.required")),1)):u("",!0),e("label",re,[$(a(l.$t("customers.fields.companyName"))+" ",1),me])])):u("",!0),t.value.type==2?(m(),c("div",ce,[e("div",ue,[i(e("input",{type:"text",id:"val-first-name",class:"form-control","onUpdate:modelValue":s[6]||(s[6]=o=>t.value.first_name=o),placeholder:l.$t("customers.fields.firstName")},null,8,pe),[[r,t.value.first_name]]),e("label",fe,a(l.$t("customers.fields.firstName")),1)]),e("div",ve,[i(e("input",{type:"text",id:"val-first-name",class:g(["form-control",{"is-invalid":d(n).last_name.$errors.length}]),"onUpdate:modelValue":s[7]||(s[7]=o=>t.value.last_name=o),onBlur:s[8]||(s[8]=(...o)=>d(n).last_name.$touch&&d(n).last_name.$touch(...o)),placeholder:l.$t("customers.fields.lastName")},null,42,_e),[[r,t.value.last_name]]),d(n).name.$errors.length?(m(),c("div",he,a(l.$t("validation.required")),1)):u("",!0),e("label",be,[$(a(l.$t("customers.fields.lastName"))+" ",1),ye])]),e("div",ge,[i(e("input",{type:"text",id:"val-middle-name",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=o=>t.value.middle_name=o),placeholder:l.$t("customers.fields.middleName")},null,8,$e),[[r,t.value.middle_name]]),e("label",we,a(l.$t("customers.fields.middleName")),1)])])):u("",!0),e("div",ke,[i(e("input",{type:"text",id:"val-email",class:"form-control","onUpdate:modelValue":s[10]||(s[10]=o=>t.value.email=o),placeholder:l.$t("customers.fields.email")},null,8,Ve),[[r,t.value.email]]),e("label",Ue,a(l.$t("customers.fields.email")),1)]),e("div",Ne,[e("div",Be,[i(e("input",{type:"text",id:"val-phone-name",class:"form-control","onUpdate:modelValue":s[11]||(s[11]=o=>t.value.phone=o),placeholder:l.$t("customers.fields.phone")},null,8,qe),[[r,t.value.phone]]),e("label",Ce,a(l.$t("customers.fields.phone")),1)]),e("div",Se,[i(e("input",{type:"text",id:"val-website",class:"form-control","onUpdate:modelValue":s[12]||(s[12]=o=>t.value.website=o),placeholder:l.$t("customers.fields.website")},null,8,Ie),[[r,t.value.website]]),e("label",Me,a(l.$t("customers.fields.website")),1)])]),e("div",Le,[i(e("input",{type:"text",id:"val-nif",class:"form-control","onUpdate:modelValue":s[13]||(s[13]=o=>t.value.ice=o),placeholder:l.$t("customers.fields.nif")},null,8,Ee),[[r,t.value.ice]]),e("label",Fe,a(l.$t("customers.fields.nif")),1)])])]),Te,e("div",ze,[e("div",Ae,[e("p",De,a(l.$t("customers.addressSection")),1)]),e("div",Re,[e("div",je,[i(e("input",{type:"text",id:"val-billing-address",class:"form-control","onUpdate:modelValue":s[14]||(s[14]=o=>t.value.address_billing=o),placeholder:l.$t("customers.fields.address")},null,8,Ge),[[r,t.value.address_billing]]),e("label",He,a(l.$t("customers.fields.address")),1)]),e("div",Je,[e("div",Ke,[i(e("input",{type:"text",id:"val-city",class:"form-control","onUpdate:modelValue":s[15]||(s[15]=o=>t.value.city=o),placeholder:l.$t("customers.fields.city")},null,8,Oe),[[r,t.value.city]]),e("label",Pe,a(l.$t("customers.fields.city")),1)]),e("div",Qe,[i(e("input",{type:"text",id:"val-post-code",class:"form-control","onUpdate:modelValue":s[16]||(s[16]=o=>t.value.post_code=o),placeholder:l.$t("customers.fields.postalCode")},null,8,We),[[r,t.value.post_code]]),e("label",Xe,a(l.$t("customers.fields.postalCode")),1)])]),e("div",Ye,[e("div",Ze,[i(e("select",{class:"form-select",id:"example-select-floating",name:"example-select-floating","onUpdate:modelValue":s[17]||(s[17]=o=>t.value.billing_country_id=o),"aria-label":"Floating label select example"},[e("option",xe,a(l.$t("common.selectOption")),1),(m(!0),c(E,null,F(_.value,o=>(m(),c("option",{value:o.id},a(o.name),9,es))),256))],512),[[L,t.value.billing_country_id]]),e("label",ss,a(l.$t("customers.fields.country")),1)])])])]),ts]),_:1},8,["title"])],40,J)])}}};export{is as default};

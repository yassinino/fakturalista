import{z as B,g as P,B as U,o as _,c as u,j as d,d as r,a as e,e as m,I as N,K as V,x as h,r as g,w as $,L as A,t as c,n as E,k as f,R as I}from"./main-35dd85fa.js";import{_ as M}from"./Pagination-a1fddd4f.js";const j={class:"content"},D={class:"block-options-item"},F={class:"table table-vcenter"},T={class:"text-center"},z=e("th",{class:"d-none d-sm-table-cell"}," Numero ",-1),L=e("th",{class:"d-none d-sm-table-cell"}," Cliente ",-1),S=e("th",{class:"d-none d-sm-table-cell"}," Fecha ",-1),q=e("th",{class:"d-none d-sm-table-cell"}," SUMA ",-1),K=e("th",{class:"d-none d-sm-table-cell"}," Total ",-1),R=e("th",{class:"d-none d-sm-table-cell"}," Estado ",-1),G=e("th",{class:"text-center",style:{width:"100px"}},"Acciones",-1),H={class:"text-center",scope:"row"},J=["onUpdate:modelValue"],O={class:"d-none d-sm-table-cell"},Q={class:"d-none d-sm-table-cell"},W={class:"d-none d-sm-table-cell"},X={class:"d-none d-sm-table-cell"},Y={class:"d-none d-sm-table-cell"},Z={class:"d-none d-sm-table-cell"},ee={class:"text-center"},te={class:"dropdown dropstart push"},se=e("button",{type:"button",class:"btn btn-outline-primary dropdown-toggle",id:"dropdown-dropleft-dark","data-bs-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("i",{class:"fa fa-fw fa-ellipsis-v"})],-1),ae={class:"dropdown-menu fs-sm","aria-labelledby":"dropdown-dropleft-dark"},oe=["onClick"],ne=["onClick"],re={__name:"index",setup(le){const b=I({}),l=B([]),s=P({current_page:1,last_page:1,per_page:10,total:0});async function i(t=s.current_page,o=s.per_page){const{data:n}=await h.get("/invoices",{params:{page:t,per_page:o}});l.value=n.invoices,s.current_page=n.meta.current_page,s.last_page=n.meta.last_page,s.per_page=n.meta.per_page??o,s.total=n.meta.total}U(()=>i());function k(t){t<1||t>s.last_page||(s.current_page=t,i(t,s.per_page))}function v(t){s.per_page=t,s.current_page=1,i(1,t)}const w=t=>{confirm("¿Estás seguro de que deseas eliminar esta factura?")&&h.delete("/invoices/"+t.uuid).then(o=>{l.value=l.value.filter(n=>n.uuid!==t.uuid)}).catch(o=>{console.error("There was an error deleting the invoice!",o)})},x=t=>{l.value=l.value.map(o=>(o.checked=t,o))};async function y(t){h.post("/invoices/print",t).then(o=>{b.success(o.data.message),window.open(o.data.pdf_url,"_blank")})}return(t,o)=>{const n=g("router-link"),C=g("BaseBlock");return _(),u("div",j,[d(C,{title:"Facturas"},{options:r(()=>[e("div",D,[d(n,{to:"invoices/new",class:"btn btn-primary"},{default:r(()=>[m("Nueva factura")]),_:1})])]),default:r(()=>[e("table",F,[e("thead",null,[e("tr",null,[e("th",T,[e("input",{type:"checkbox",class:"form-check-input",onChange:x},null,32)]),z,L,S,q,K,R,G])]),e("tbody",null,[(_(!0),u(N,null,V(l.value,a=>(_(),u("tr",{key:a.id},[e("th",H,[$(e("input",{type:"checkbox",name:"",class:"form-check-input","onUpdate:modelValue":p=>a.checked=p},null,8,J),[[A,a.checked]])]),e("td",O,[d(n,{to:"invoices/edit/"+a.uuid},{default:r(()=>[m(c(a.reference),1)]),_:2},1032,["to"])]),e("td",Q,c(a.customer),1),e("td",W,c(a.date),1),e("td",X,c(t.$toComma(a.sub_total)),1),e("td",Y,c(t.$toComma(a.total)),1),e("td",Z,[e("span",{class:E(["fs-xs fw-semibold d-inline-block py-1 px-3 rounded-pill",a.status==1?"bg-success-light text-success":"bg-danger-light text-danger"])},c(a.status==1?"Pagado":"No Pagado"),3)]),e("td",ee,[e("div",te,[se,e("div",ae,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:f(p=>y(a),["prevent"])},"Documento",8,oe),e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:f(p=>w(a),["prevent"])},"Eliminar",8,ne)])])])]))),128))])]),d(M,{data:l.value,meta:{currentPage:s.current_page,lastPage:s.last_page,perPage:s.per_page,total:s.total},"onUpdate:page":k,"onUpdate:perPage":v},null,8,["data","meta"])]),_:1})])}}};export{re as default};

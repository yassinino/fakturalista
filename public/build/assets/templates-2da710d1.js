import{r as S,e as Z,f as m,y as ee,o as d,c as r,b as e,t as b,i as u,d as te,F as oe,A as se,O as n,l,n as N,k as a,v as g,D as E,B as p,C as F,s as P}from"./main-eaddb9f9.js";const le={class:"content content-boxed"},ne={class:"d-flex justify-content-between align-items-center mb-4"},ae=e("div",null,[e("h3",{class:"mb-1"},"Plantillas de factura"),e("p",{class:"text-muted mb-0"},"Personaliza apariencia")],-1),ie={class:"d-flex align-items-center gap-2"},de={key:0,class:"text-success small"},re={key:1,class:"text-danger small"},ce=["disabled"],ue={key:0,class:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"},_e={class:"d-flex align-items-center gap-2 mb-3 border rounded px-3 py-2 bg-white p-4"},me={class:"d-inline-flex flex-wrap"},pe=["onClick"],he={class:"row g-4"},be={class:"col-lg-8"},fe={class:"border rounded bg-white p-4",style:{"min-height":"520px"}},ye={class:"d-flex align-items-center justify-content-between mb-3"},ve=["src"],ge={class:"flex-grow-1 text-end"},we={class:"row mb-4 mt-4"},xe={class:"table-responsive mb-3"},ke=e("br",null,null,-1),Ce={class:"row mb-2"},Se=e("div",{class:"col-6"},null,-1),Ve={class:"col-6"},Ue=e("span",null,"Subtotal",-1),je=e("span",null,"333,00 €",-1),Te=[Ue,je],Ie=e("span",null,"IVA (333,00 € x 20%)",-1),ze=e("span",null,"66,60 €",-1),De=[Ie,ze],Me=e("span",null,"Total",-1),Ne=e("span",null,"399,60 €",-1),Pe=[Me,Ne],Ae=e("span",null,"Términos de pago",-1),Be={key:0,class:"mt-4"},Le={class:"col-lg-4"},Ee={class:"border rounded p-3",style:{background:"#f8f9fb"}},Fe={key:0,class:"bg-white border rounded p-3"},We={class:"mb-3"},$e=e("label",{class:"form-label mb-1"},"Color scheme",-1),Re={class:"mb-3"},Ge=e("label",{class:"form-label mb-1"},"Font",-1),He=e("option",{value:"Arial, sans-serif"},"Arial",-1),Oe=e("option",{value:"Helvetica, Arial, sans-serif"},"Helvetica",-1),qe=e("option",{value:"Georgia, serif"},"Georgia",-1),Je=e("option",{value:"Times New Roman, serif"},"Times New Roman",-1),Ke=[He,Oe,qe,Je],Qe={class:"mb-3"},Xe=e("label",{class:"form-label mb-1"},"Font size",-1),Ye=e("option",{value:"small"},"Small",-1),Ze=e("option",{value:"medium"},"Medium",-1),et=e("option",{value:"large"},"Large",-1),tt=[Ye,Ze,et],ot={class:"mb-1"},st=e("label",{class:"form-label mb-1"},"Font color",-1),lt={key:1,class:"bg-white border rounded p-3"},nt={class:"list-group list-group-flush"},at={class:"list-group-item d-flex justify-content-between align-items-center px-0"},it=e("span",null,"Payment terms",-1),dt={class:"form-check form-switch"},rt={class:"list-group-item d-flex justify-content-between align-items-center px-0"},ct=e("span",null,"Customer number",-1),ut={class:"form-check form-switch"},_t={class:"list-group-item d-flex justify-content-between align-items-center px-0"},mt=e("span",null,"Customer phone no.",-1),pt={class:"form-check form-switch"},ht={class:"list-group-item d-flex justify-content-between align-items-center px-0"},bt=e("span",null,"Shipping address",-1),ft={class:"form-check form-switch"},yt={class:"list-group-item d-flex justify-content-between align-items-center px-0"},vt=e("span",null,"Billing address on right",-1),gt={class:"form-check form-switch"},wt={class:"list-group-item d-flex justify-content-between align-items-center px-0"},xt=e("span",null,"Logo placement",-1),kt={class:"d-flex gap-2"},Ct={class:"form-check"},St=e("label",{class:"form-check-label",for:"logo-above-2"},"Above",-1),Vt={class:"form-check"},Ut=e("label",{class:"form-check-label",for:"logo-left-2"},"Left",-1),jt={class:"list-group-item px-0"},Tt=e("label",{class:"form-label mb-1"},"Logo Width",-1),It={class:"text-muted small"},zt={key:2,class:"bg-white border rounded p-3"},Dt={class:"mb-3"},Mt=e("label",{class:"form-label mb-1"},"Table header",-1),Nt={class:"d-flex gap-2"},Pt={class:"mb-3"},At=e("label",{class:"form-label mb-1"},"Table border",-1),Bt={class:"list-group list-group-flush"},Lt={class:"list-group-item d-flex justify-content-between align-items-center px-0"},Et=e("span",null,"Show discount column",-1),Ft={class:"form-check form-switch"},Wt={class:"list-group-item d-flex justify-content-between align-items-center px-0"},$t=e("span",null,"Show tax column",-1),Rt={class:"form-check form-switch"},Gt={key:3,class:"bg-white border rounded p-3"},Ht=e("label",{class:"form-label mb-1"},"Payment note",-1),Ot={class:"form-check form-switch mb-3"},qt=e("label",{class:"form-check-label",for:"show-payment-note-2"},"Show payment note",-1),Jt={class:"list-group list-group-flush"},Kt={class:"list-group-item d-flex justify-content-between align-items-center px-0"},Qt=e("span",null,"Show subtotal",-1),Xt={class:"form-check form-switch"},Yt={class:"list-group-item d-flex justify-content-between align-items-center px-0"},Zt=e("span",null,"Show tax breakdown",-1),eo={class:"form-check form-switch"},to={class:"list-group-item d-flex justify-content-between align-items-center px-0"},oo=e("span",null,"Bold total",-1),so={class:"form-check form-switch"},ao={__name:"templates",setup(lo){const W=[{key:"appearance",label:"Appearance"},{key:"header",label:"Header"},{key:"invoice_table",label:"Table"},{key:"bottom",label:"Bottom"}],f=S("appearance"),A=S("https://fakturalista.com/assets/logo.svg");function B(){return{primary:"#dad7d2",text:"#1f1c1a",muted:"#6b6764",table_header_bg:"#dedad5",table_header_text:"#4a4745",table_border:"#cfcac5",font_family:"Arial, sans-serif",font_size:"medium",logo_width_mm:50,logo_position:"above",show_payment_terms:!0,show_customer_number:!1,show_customer_phone:!1,show_shipping_address:!0,billing_address_right:!1,show_discount:!1,show_tax_column:!0,show_subtotal:!0,show_tax_breakdown:!0,bold_total:!0,payment_note:"",show_payment_note:!0}}const t=Z(B()),V=S(!1),U=S(""),j=S(""),T=S(null);function L(c){return c==="small"?13:c==="large"?16:14}const y=m(()=>({fontFamily:t.font_family,color:t.text,fontSize:`${L(t.font_size)}px`})),$=m(()=>({...y.value,fontWeight:700,fontSize:`${L(t.font_size)+4}px`,color:t.primary})),I=m(()=>({...y.value,fontWeight:700})),h=m(()=>({...y.value})),w=m(()=>({...y.value,color:t.muted})),R=m(()=>({...y.value,borderColor:t.table_border})),G=m(()=>({background:t.table_header_bg,color:t.table_header_text,...y.value,fontWeight:700})),x=m(()=>({borderBottom:`1px solid ${t.table_border}`,padding:"10px"})),k=m(()=>({borderBottom:`1px solid ${t.table_border}`,padding:"10px",verticalAlign:"top"}));m(()=>({...y.value,fontWeight:t.bold_total?900:500}));const H=m(()=>({width:`${t.logo_width_mm}mm`})),z={customerPhone:"657 985 633 / 652 138 016",customerNumber:"C-001",paymentTerms:"Neto 30 días"},O=new Date().toLocaleDateString("es-ES");function q(c){if(!c)return null;const o=c.replace("#","");if(![3,6].includes(o.length))return null;const s=o.length===3?o.split("").map(v=>v+v).join(""):o,_=parseInt(s,16);return[_>>16&255,_>>8&255,_&255]}function J(c){const o=q(c);if(!o)return!1;const[s,_,v]=o;return(.299*s+.587*_+.114*v)/255<.6}function K(c){t.primary=c;const o=J(c);t.table_header_bg=c,t.table_border=c,t.table_header_text=o?"#ffffff":"#1f1c1a"}const i=()=>{};function Q(){return{name:"Default invoice",slug:"default-invoice",version:1,is_default:!0,is_active:!0,document_type:"invoice",engine:"dompdf",paper_size:"A4",orientation:"portrait",locale:"es",timezone:"Europe/Madrid",margin_top_mm:15,margin_right_mm:18,margin_bottom_mm:15,margin_left_mm:18,css:null,header_html:null,body_html:"<div></div>",footer_html:null,...t}}async function X(){var c;try{const{data:o}=await P.get("/invoice-templates"),s=(c=o.templates)==null?void 0:c[0];s&&(T.value=s.id,Object.keys(B()).forEach(_=>{s[_]!==void 0&&(t[_]=s[_])}))}catch(o){console.error("No se pudo cargar plantilla",o)}}async function Y(){var o,s,_,v,D;U.value="",j.value="",V.value=!0;const c=Q();try{let C;T.value?C=await P.put(`/invoice-templates/${T.value}`,c):C=await P.post("/invoice-templates",c);const{data:M}=C;U.value=M.message||"Guardado correctamente",(o=M.template)!=null&&o.id&&(T.value=M.template.id)}catch(C){j.value=((_=(s=C.response)==null?void 0:s.data)==null?void 0:_.message)||((D=(v=C.response)==null?void 0:v.data)==null?void 0:D.error)||"No se pudo guardar"}finally{V.value=!1}}return ee(()=>{X()}),(c,o)=>(d(),r("div",le,[e("div",ne,[ae,e("div",ie,[U.value?(d(),r("div",de,b(U.value),1)):u("",!0),j.value?(d(),r("div",re,b(j.value),1)):u("",!0),e("button",{type:"button",class:"btn btn-primary",disabled:V.value,onClick:Y},[V.value?(d(),r("span",ue)):u("",!0),te(" Guardar ")],8,ce)])]),e("div",_e,[e("div",me,[(d(),r(oe,null,se(W,s=>e("button",{key:s.key,type:"button",class:N(["btn border-0",{"text-primary fw-semibold":f.value===s.key,"text-secondary":f.value!==s.key}]),onClick:_=>f.value=s.key},b(s.label),11,pe)),64))])]),e("div",he,[e("div",be,[e("div",fe,[e("div",ye,[A.value?(d(),r("div",{key:0,class:"me-3",style:n(l(H))},[e("img",{src:A.value,alt:"Logo",class:"img-fluid",style:{maxWidth:"100%"}},null,8,ve)],4)):u("",!0),e("div",ge,[e("div",{style:n(l($))},"Factura Núm. INV-001",4),e("div",{style:n(l(w))},b(l(O)),5)])]),e("div",we,[e("div",{class:N(t.billing_address_right?"col-6 order-2":"col-6 order-1")},[e("div",{style:n(l(w))},"Dirección de facturación",4),e("div",{style:n(l(I))},"MISC CUSTOMER",4),t.show_customer_number?(d(),r("div",{key:0,style:n(l(w))},"Cliente #"+b(z.customerNumber),5)):u("",!0),e("div",{style:n(l(h))},"ait melloul",4),e("div",{style:n(l(h))},"agadir 68602",4),t.show_customer_phone?(d(),r("div",{key:1,style:n(l(h))},"Tel: "+b(z.customerPhone),5)):u("",!0)],2),t.show_shipping_address?(d(),r("div",{key:0,class:N(t.billing_address_right?"col-6 order-1":"col-6 order-2")},[e("div",{style:n(l(w))},"Dirección de envío",4),e("div",{style:n(l(I))},"MISC CUSTOMER",4),e("div",{style:n(l(h))},"ait melloul",4),e("div",{style:n(l(h))},"agadir 68602",4)],2)):u("",!0)]),e("div",xe,[e("table",{class:"table table-sm mb-0",style:n(l(R))},[e("thead",null,[e("tr",{style:n(l(G))},[e("th",{style:n(l(x))},"Nombre de artículo y descripción",4),t.show_tax_column?(d(),r("th",{key:0,style:n(l(x))},"IVA",4)):u("",!0),t.show_discount?(d(),r("th",{key:1,style:n(l(x))},"Dto.",4)):u("",!0),e("th",{style:n(l(x))},"Cantidad",4),e("th",{style:n(l(x))},"Precio unitario",4),e("th",{style:n(l(x))},"Importe",4)],4)]),e("tbody",null,[e("tr",null,[e("td",{style:n(l(k))},[e("strong",{style:n(l(h))},"PS-001 test",4),ke,e("span",{style:n(l(w))},"fdsafd",4)],4),t.show_tax_column?(d(),r("td",{key:0,style:n(l(k))},"20%",4)):u("",!0),t.show_discount?(d(),r("td",{key:1,style:n(l(k))},"5%",4)):u("",!0),e("td",{style:n(l(k))},"1",4),e("td",{style:n(l(k))},"333,00 € /day",4),e("td",{style:n(l(k))},"333,00 €",4)])])],4)]),e("div",Ce,[Se,e("div",Ve,[t.show_subtotal?(d(),r("div",{key:0,class:"d-flex justify-content-between",style:n(l(h))},Te,4)):u("",!0),t.show_tax_breakdown?(d(),r("div",{key:1,class:"d-flex justify-content-between",style:n(l(h))},De,4)):u("",!0),e("div",{class:"d-flex justify-content-between mt-2",style:n(l(h))},Pe,4),t.show_payment_terms?(d(),r("div",{key:2,class:"d-flex justify-content-between mt-2",style:n(l(w))},[Ae,e("span",null,b(z.paymentTerms),1)],4)):u("",!0)])]),t.show_payment_note&&t.payment_note?(d(),r("div",Be,[e("div",{style:n(l(I))},"Información de Pago",4),e("ul",{class:"mb-0",style:n(l(h))},[e("li",null,b(t.payment_note),1)],4)])):u("",!0)])]),e("div",Le,[e("div",Ee,[f.value==="appearance"?(d(),r("div",Fe,[e("div",We,[$e,a(e("input",{type:"color",class:"form-control form-control-color","onUpdate:modelValue":o[0]||(o[0]=s=>t.primary=s),onInput:o[1]||(o[1]=s=>K(s.target.value))},null,544),[[g,t.primary]])]),e("div",Re,[Ge,a(e("select",{class:"form-select","onUpdate:modelValue":o[2]||(o[2]=s=>t.font_family=s),onChange:i},Ke,544),[[E,t.font_family]])]),e("div",Qe,[Xe,a(e("select",{class:"form-select","onUpdate:modelValue":o[3]||(o[3]=s=>t.font_size=s),onChange:i},tt,544),[[E,t.font_size]])]),e("div",ot,[st,a(e("input",{type:"color",class:"form-control form-control-color","onUpdate:modelValue":o[4]||(o[4]=s=>t.text=s),onInput:i},null,544),[[g,t.text]])])])):f.value==="header"?(d(),r("div",lt,[e("div",nt,[e("div",at,[it,e("div",dt,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[5]||(o[5]=s=>t.show_payment_terms=s),onChange:i},null,544),[[p,t.show_payment_terms]])])]),e("div",rt,[ct,e("div",ut,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[6]||(o[6]=s=>t.show_customer_number=s),onChange:i},null,544),[[p,t.show_customer_number]])])]),e("div",_t,[mt,e("div",pt,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[7]||(o[7]=s=>t.show_customer_phone=s),onChange:i},null,544),[[p,t.show_customer_phone]])])]),e("div",ht,[bt,e("div",ft,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[8]||(o[8]=s=>t.show_shipping_address=s),onChange:i},null,544),[[p,t.show_shipping_address]])])]),e("div",yt,[vt,e("div",gt,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[9]||(o[9]=s=>t.billing_address_right=s),onChange:i},null,544),[[p,t.billing_address_right]])])]),e("div",wt,[xt,e("div",kt,[e("div",Ct,[a(e("input",{class:"form-check-input",type:"radio",value:"above","onUpdate:modelValue":o[10]||(o[10]=s=>t.logo_position=s),onChange:i,id:"logo-above-2"},null,544),[[F,t.logo_position]]),St]),e("div",Vt,[a(e("input",{class:"form-check-input",type:"radio",value:"left","onUpdate:modelValue":o[11]||(o[11]=s=>t.logo_position=s),onChange:i,id:"logo-left-2"},null,544),[[F,t.logo_position]]),Ut])])]),e("div",jt,[Tt,a(e("input",{type:"range",class:"form-range",min:"30",max:"120",step:"2","onUpdate:modelValue":o[12]||(o[12]=s=>t.logo_width_mm=s),onInput:i},null,544),[[g,t.logo_width_mm,void 0,{number:!0}]]),e("div",It,b(t.logo_width_mm)+" mm",1)])])])):f.value==="invoice_table"?(d(),r("div",zt,[e("div",Dt,[Mt,e("div",Nt,[a(e("input",{type:"color",class:"form-control form-control-color","onUpdate:modelValue":o[13]||(o[13]=s=>t.table_header_bg=s),onInput:i},null,544),[[g,t.table_header_bg]]),a(e("input",{type:"color",class:"form-control form-control-color","onUpdate:modelValue":o[14]||(o[14]=s=>t.table_header_text=s),onInput:i},null,544),[[g,t.table_header_text]])])]),e("div",Pt,[At,a(e("input",{type:"color",class:"form-control form-control-color","onUpdate:modelValue":o[15]||(o[15]=s=>t.table_border=s),onInput:i},null,544),[[g,t.table_border]])]),e("div",Bt,[e("div",Lt,[Et,e("div",Ft,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[16]||(o[16]=s=>t.show_discount=s),onChange:i},null,544),[[p,t.show_discount]])])]),e("div",Wt,[$t,e("div",Rt,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[17]||(o[17]=s=>t.show_tax_column=s),onChange:i},null,544),[[p,t.show_tax_column]])])])])])):f.value==="bottom"?(d(),r("div",Gt,[Ht,a(e("textarea",{class:"form-control mb-2",rows:"3","onUpdate:modelValue":o[18]||(o[18]=s=>t.payment_note=s),onInput:i},null,544),[[g,t.payment_note]]),e("div",Ot,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[19]||(o[19]=s=>t.show_payment_note=s),onChange:i,id:"show-payment-note-2"},null,544),[[p,t.show_payment_note]]),qt]),e("div",Jt,[e("div",Kt,[Qt,e("div",Xt,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[20]||(o[20]=s=>t.show_subtotal=s),onChange:i},null,544),[[p,t.show_subtotal]])])]),e("div",Yt,[Zt,e("div",eo,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[21]||(o[21]=s=>t.show_tax_breakdown=s),onChange:i},null,544),[[p,t.show_tax_breakdown]])])]),e("div",to,[oo,e("div",so,[a(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[22]||(o[22]=s=>t.bold_total=s),onChange:i},null,544),[[p,t.bold_total]])])])])])):u("",!0)])])])]))}};export{ao as default};
